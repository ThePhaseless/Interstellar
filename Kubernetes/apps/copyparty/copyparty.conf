# =============================================================================
# Copyparty Configuration
# =============================================================================
# SMB: admin-only on local + Tailscale networks
# Web UI: non-admin users get read-only via IdP (Authentik/OAuth2-Proxy)

[global]
# Web server settings
i: 0.0.0.0
p: 3923

# Reverse proxy mode - trust X-Forwarded-For headers from Traefik
rp

# IdP authentication (OAuth2-Proxy / Authentik)
auth-ord: idp
idp-h-usr: X-Forwarded-User

# WebDAV settings - provides native file manager access
# Admin gets read-write via account permissions
daw

# Logging
lo: /dev/stdout

# Security
no-robots
no-logues

# Performance
j: 4
hist: 0

[accounts]
# Account credentials loaded from secrets (admin:pass, writer:pass)
%{inc:/cfg/secrets/admins}%
%{inc:/cfg/secrets/writers}%

[/personal]
  /personal
  accs:
    rwmda: admin
    r: writer

[/personal/public]
  /personal/public
  accs:
    rwmda: admin
    rw: writer

[/media]
  /media
  accs:
    r: admin, writer
